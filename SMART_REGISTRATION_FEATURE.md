# ููุฒุฉ ุงูุชุณุฌูู ุงูุฐูู (Smart Registration)

## ูุธุฑุฉ ุนุงูุฉ
ุชู ุชุทููุฑ ูุธุงู ุชุณุฌูู ุฐูู ูุณูุญ ูููุณุชุฎุฏููู ุจุงูุชุณุฌูู ุจุงุณุชุฎุฏุงู ุญูู ูุงุญุฏ ููุจู ุฅูุง ุฑูู ุงููุงุชู ุฃู ุงูุจุฑูุฏ ุงูุฅููุชุฑูููุ ูุน ูุธุงู ุฅุญุงูุฉ ูุชูุงูู.

## ุงูููุฒุงุช ุงูุฑุฆูุณูุฉ

### 1. ุงูุญูู ุงูุฐูู (Smart Contact Field)
- **ุญูู ูุงุญุฏ** ููุจู ุฑูู ูุงุชู ุฃู ุจุฑูุฏ ุฅููุชุฑููู
- **ุงูุชุญููู ุงูุชููุงุฆู:**
  - ุฅุฐุง ูุงู ุงููุฏุฎู 10 ุฃุฑูุงู ุจุงูุถุจุท โ ููุนุชุจุฑ ุฑูู ูุงุชู
  - ุฅุฐุง ูุงู ุงููุฏุฎู ุจุตูุบุฉ ุจุฑูุฏ ุฅููุชุฑููู ุตุญูุญุฉ โ ููุนุชุจุฑ ุจุฑูุฏ ุฅููุชุฑููู
  - ุฃู ูุฏุฎู ุขุฎุฑ โ ููุฑูุถ ูุน ุฑุณุงูุฉ ุฎุทุฃ ูุงุถุญุฉ

### 2. ูุธุงู ุงูุฅุญุงูุฉ ุงูุฐูู
- **ุนูุฏ ูุฌูุฏ ุงุณู ูุฑุฌุนู ูู ุงูุฑุงุจุท (`?ref=username`):**
  - ููุฎูู ุญูู ุงูุงุณู ุงููุฑุฌุนู ูู ุงููููุฐุฌ
  - ูุธูุฑ ูุต ุชูุถูุญู: "ุชูุช ุฏุนูุชู ุจูุงุณุทุฉ: [ุงุณู ุงููุณุชุฎุฏู]"
  - ููุณุฌู ุงูุงุณู ุงููุฑุฌุนู ุชููุงุฆูุงู

- **ุนูุฏ ุนุฏู ูุฌูุฏ ุงุณู ูุฑุฌุนู:**
  - ูุธูุฑ ุญูู ุงูุงุณู ุงููุฑุฌุนู ูุญูู ุงุฎุชูุงุฑู
  - ูููู ูููุณุชุฎุฏู ุฅุฏุฎุงู ุงุณู ุงููุณุชุฎุฏู ุงููุฑุฌุนู ูุฏููุงู

### 3. ุงูุชุญูู ุงูููุฑู
- ูุนุฑุถ ุงููุธุงู ุฑุณุงูุฉ ููุฑูุฉ ุชูุถุญ ููุน ุงูุจูุงูุงุช ุงูููุฏุฎูุฉ:
  - โ "ุชู ุงูุชุนุฑู ุนูู: ุฑูู ูุงุชู (0123456789)"
  - โ "ุชู ุงูุชุนุฑู ุนูู: ุจุฑูุฏ ุฅููุชุฑููู (user@example.com)"
  - โน๏ธ "ุฃุฏุฎู 10 ุฃุฑูุงู ูุฑูู ุงููุงุชู ุฃู ุจุฑูุฏ ุฅููุชุฑููู ุตุญูุญ"

## ุงูุชุบููุฑุงุช ุงูุชูููุฉ

### 1. ูุงุนุฏุฉ ุงูุจูุงูุงุช
- ุฌุนู ุญููู `email` ู `phone` nullable ูู ุฌุฏูู `users`
- ุงูุงุญุชูุงุธ ุจุญูููู ูููุตููู ูุณูููุฉ ุงูุงุณุชุนูุงู ูุงูููุชุฑุฉ
- Migration: `2025_10_01_172558_make_email_and_phone_nullable_in_users_table.php`

### 2. Livewire Component (`Register.php`)
**ุฎุตุงุฆุต ุฌุฏูุฏุฉ:**
```php
public string $contact_info = ''; // ุงูุญูู ุงูุฐูู
public bool $hasReferralInUrl = false; // ูู ููุฌุฏ ุงุณู ูุฑุฌุนู ูู ุงูุฑุงุจุทุ
```

**ุฏูุงู ุฌุฏูุฏุฉ:**
- `parseContactInfo()`: ุชุญููู ุงูุญูู ุงูุฐูู ูุชุญุฏูุฏ ููุนู
- `updatedContactInfo()`: ุชูุณุชุฏุนู ุชููุงุฆูุงู ุนูุฏ ุชุบููุฑ ุงูุญูู

**ููุงุนุฏ ุงูุชุญูู:**
- ุชุญูู ูุฎุตุต ููุญูู ุงูุฐูู ูุชุถูู:
  - ุงูุชุญูู ูู ุตุญุฉ ุงูุตูุบุฉ (10 ุฃุฑูุงู ุฃู ุจุฑูุฏ ุฅููุชุฑููู)
  - ุงูุชุญูู ูู ุนุฏู ุชูุฑุงุฑ ุงูุจูุงูุงุช ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช

### 3. ูุงุฌูุฉ ุงููุณุชุฎุฏู (`register.blade.php`)
- ุงุณุชุจุฏุงู ุญููู ุงูุจุฑูุฏ ุงูุฅููุชุฑููู ูุฑูู ุงููุงุชู ุจุญูู ูุงุญุฏ
- ุฅุฎูุงุก/ุฅุธูุงุฑ ุญูู ุงูุงุณู ุงููุฑุฌุนู ุจูุงุกู ุนูู ูุฌูุฏู ูู ุงูุฑุงุจุท
- ุฑุณุงุฆู ุชูุถูุญูุฉ ููุฑูุฉ ูููุณุชุฎุฏู

## ุฃูุซูุฉ ุงูุงุณุชุฎุฏุงู

### ูุซุงู 1: ุงูุชุณุฌูู ุจุฑูู ูุงุชู
```
ุงุณู ุงููุณุชุฎุฏู: ahmed123
ุฑูู ุงููุงุชู ุฃู ุงูุจุฑูุฏ: 0771234567
ูููุฉ ุงููุฑูุฑ: ********
```
ุงููุชูุฌุฉ: ููุณุฌู ุงููุณุชุฎุฏู ูุน `phone = '0771234567'` ู `email = null`

### ูุซุงู 2: ุงูุชุณุฌูู ุจุจุฑูุฏ ุฅููุชุฑููู
```
ุงุณู ุงููุณุชุฎุฏู: sara456
ุฑูู ุงููุงุชู ุฃู ุงูุจุฑูุฏ: sara@example.com
ูููุฉ ุงููุฑูุฑ: ********
```
ุงููุชูุฌุฉ: ููุณุฌู ุงููุณุชุฎุฏู ูุน `email = 'sara@example.com'` ู `phone = null`

### ูุซุงู 3: ุงูุชุณุฌูู ุนุจุฑ ุฑุงุจุท ุฅุญุงูุฉ
```
ุงูุฑุงุจุท: https://example.com/register?ref=ahmed123
```
- ูุธูุฑ: "ุชูุช ุฏุนูุชู ุจูุงุณุทุฉ: ุฃุญูุฏ ูุญูุฏ"
- ููุฎูู ุญูู ุงูุงุณู ุงููุฑุฌุนู
- ููุณุฌู `referred_by = 'ahmed123'` ุชููุงุฆูุงู

### ูุซุงู 4: ุฅุฏุฎุงู ุฎุงุทุฆ
```
ุฑูู ุงููุงุชู ุฃู ุงูุจุฑูุฏ: abc123
```
ุงููุชูุฌุฉ: โ "ูุฌุจ ุฅุฏุฎุงู ุฑูู ูุงุชู (10 ุฃุฑูุงู) ุฃู ุจุฑูุฏ ุฅููุชุฑููู ุตุญูุญ"

## ุงููููุงุช ุงููุนุฏูุฉ

1. **`app/Http/Livewire/Auth/Register.php`**
   - ุฅุถุงูุฉ ุฎุงุตูุฉ `contact_info`
   - ุฅุถุงูุฉ ุฎุงุตูุฉ `hasReferralInUrl`
   - ุฅุถุงูุฉ ุฏุงูุฉ `parseContactInfo()`
   - ุชุนุฏูู ููุงุนุฏ ุงูุชุญูู

2. **`resources/views/livewire/auth/register.blade.php`**
   - ุงุณุชุจุฏุงู ุญููู ุงูุจุฑูุฏ ูุงููุงุชู ุจุญูู ูุงุญุฏ
   - ุฅุถุงูุฉ ููุทู ุฅุฎูุงุก/ุฅุธูุงุฑ ุญูู ุงูุงุณู ุงููุฑุฌุนู
   - ุฅุถุงูุฉ ุฑุณุงุฆู ุงูุชุญูู ุงูููุฑูุฉ

3. **`database/migrations/2025_10_01_172558_make_email_and_phone_nullable_in_users_table.php`**
   - ุฌุนู `email` nullable
   - ุฌุนู `phone` nullable

4. **`database/migrations/2025_09_12_150546_create_users_table.php`**
   - ุชุญุฏูุซ ุชุนุฑูู ุงูุญููู ูุชููู nullable

## ููุงุญุธุงุช ูููุฉ

### ูููุทูุฑูู:
1. ุงูุญููุงู `email` ู `phone` ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช ูุจููุงู ูููุตููู
2. ูุฌุจ ุงุณุชุฎุฏุงู `wire:model.lazy` ููุญูู ุงูุฐูู ูุชุฌูุจ ุงูุทูุจุงุช ุงููุชูุฑุฑุฉ
3. ุงูุชุญูู ูู ุงูุชูุฑุงุฑ ูุชู ูู ููุงุนุฏ ุงูุชุญูู ุงููุฎุตุตุฉ

### ูููุณุชุฎุฏููู:
1. ุฑูู ุงููุงุชู ูุฌุจ ุฃู ูููู 10 ุฃุฑูุงู ุจุงูุถุจุท (ุจุฏูู ูุณุงูุงุช ุฃู ุฑููุฒ)
2. ุงูุจุฑูุฏ ุงูุฅููุชุฑููู ูุฌุจ ุฃู ูููู ุจุตูุบุฉ ุตุญูุญุฉ
3. ุงูุงุณู ุงููุฑุฌุนู ุงุฎุชูุงุฑู ุฅูุง ุฅุฐุง ูุงู ููุฌูุฏุงู ูู ุงูุฑุงุจุท

## ุงูุงุฎุชุจุงุฑ

### ุงุฎุชุจุงุฑ ุงูุญูู ุงูุฐูู:
```bash
# ุงุฎุชุจุงุฑ ุฑูู ูุงุชู ุตุญูุญ
Input: 0771234567
Expected: โ ุชู ุงูุชุนุฑู ุนูู: ุฑูู ูุงุชู

# ุงุฎุชุจุงุฑ ุจุฑูุฏ ุฅููุชุฑููู ุตุญูุญ
Input: test@example.com
Expected: โ ุชู ุงูุชุนุฑู ุนูู: ุจุฑูุฏ ุฅููุชุฑููู

# ุงุฎุชุจุงุฑ ุฅุฏุฎุงู ุฎุงุทุฆ
Input: abc123
Expected: โ ูุฌุจ ุฅุฏุฎุงู ุฑูู ูุงุชู (10 ุฃุฑูุงู) ุฃู ุจุฑูุฏ ุฅููุชุฑููู ุตุญูุญ
```

### ุงุฎุชุจุงุฑ ูุธุงู ุงูุฅุญุงูุฉ:
```bash
# ูุน ุงุณู ูุฑุฌุนู ูู ุงูุฑุงุจุท
URL: /register?ref=ahmed123
Expected: 
- ูุธูุฑ ูุต: "ุชูุช ุฏุนูุชู ุจูุงุณุทุฉ: [ุงุณู]"
- ููุฎูู ุญูู ุงูุงุณู ุงููุฑุฌุนู

# ุจุฏูู ุงุณู ูุฑุฌุนู
URL: /register
Expected:
- ูุธูุฑ ุญูู ุงูุงุณู ุงููุฑุฌุนู ูุญูู ุงุฎุชูุงุฑู
```

## ุงูุชุญุณููุงุช ุงููุณุชูุจููุฉ ุงูููุชุฑุญุฉ

1. **ุฏุนู ุฃุฑูุงู ููุงุชู ุฏูููุฉ:**
   - ูุจูู ุฃุฑูุงู ูู 10 ุฅูู 15 ุฑูู
   - ุฅุถุงูุฉ ุฑูุฒ ุงูุฏููุฉ ุชููุงุฆูุงู

2. **ุงูุชุญูู ูู ุงูุจุฑูุฏ ุงูุฅููุชุฑููู:**
   - ุฅุฑุณุงู ุฑูุฒ ุชุญูู ุนุจุฑ ุงูุจุฑูุฏ
   - ุงูุชุญูู ูู ุตุญุฉ ุงููุทุงู (domain validation)

3. **ุงูุชุญูู ูู ุฑูู ุงููุงุชู:**
   - ุฅุฑุณุงู ุฑูุฒ OTP ุนุจุฑ SMS
   - ุงูุชุญูู ูู ุตุญุฉ ุงูุฑูู

4. **ุชุญุณูู ุชุฌุฑุจุฉ ุงููุณุชุฎุฏู:**
   - ุฅุถุงูุฉ ุฃููููุงุช ุฏููุงููููุฉ (๐ง/๐ฑ) ุจูุงุกู ุนูู ููุน ุงููุฏุฎู
   - ุฅุถุงูุฉ ุชูุณูู ุชููุงุฆู ูุฑูู ุงููุงุชู

## ุงูุฏุนู ูุงููุณุงุนุฏุฉ

ููุฅุจูุงุบ ุนู ูุดุงูู ุฃู ุงูุชุฑุงุญ ุชุญุณููุงุชุ ูุฑุฌู ุงูุชูุงุตู ูุน ูุฑูู ุงูุชุทููุฑ.

---
**ุชุงุฑูุฎ ุงูุชุญุฏูุซ:** 2025-10-01
**ุงูุฅุตุฏุงุฑ:** 1.0.0